webpackJsonp([2],{"1KHg":function(t,e){},"7Ub8":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={login:"/chimpance/users/login_archu/",information:"/chimpance/users/information/"}},"9M+g":function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e(this.layout,{tag:"component"}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App",computed:{layout:function(){return(this.$route.meta.layout||"pages")+"-layout"}}},a,!1,function(t){n("WkQT")},null,null).exports,s=n("/ocq"),i={render:function(){var t=this.$createElement;return(this._self._c||t)("h1",[this._v(" 404 No se encontro resultado para esta pagina ")])},staticRenderFns:[]},u=n("VU/8")(null,i,!1,null,null,null).exports,c=n("xLxn");o.default.use(s.a);var l=new s.a({routes:[{path:"/login",name:"Login",meta:{layout:"pages"}},{path:"/",name:"Home",meta:{layout:"bar"},component:function(){return n.e(0).then(n.bind(null,"j7e0"))}},{path:"**",name:"Not-Found  ",meta:{layout:"notfound"}}]});l.beforeEach(function(t,e,n){var o=c.a.getToken();if(o)"/login"==t.path?n({path:e.path}):n();else{if("/login"!=t.path||o)return n({path:"/login"});n()}});var m=l,f=n("Tqaz"),d=(n("Jmt5"),n("9M+g"),{data:function(){return{}},methods:{logout:function(){c.a.removeToken(),m.push("/login")}}}),p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-navbar",{staticStyle:{top:"-60px"},attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[n("b-navbar-brand",{attrs:{href:"#"}},[t._v("Archuletas")]),t._v(" "),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),t._v(" "),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("em",[t._v("Cerrar sesión")])]},proxy:!0}])},[t._v(" "),n("b-dropdown-item",{on:{click:function(e){return t.logout()}}},[t._v("Cerrar sesión")])],1)],1)],1)],1)],1)},staticRenderFns:[]},v=n("VU/8")(d,p,!1,null,null,null).exports,h=n("w1AT"),g=n("7Ub8"),b={name:"Login",data:function(){return{error:!1,form:{password:"",username:""},dismissSecs:30,dismissCountDown:0,message:"",status:""}},methods:{login:function(){var t=this;c.a.saveToken(this.form.username),h.a.post(g.a.login,this.form).then(function(e){e.data.ok?(t.message="Hola "+e.data.name+", te hemos enviado un correo electronico",t.status="info",m.push("/")):(t.message="Este correo no esta registrado",t.status="danger"),t.showAlert()})},onSubmit:function(t){var e=this;h.a.post(g.a.login,this.form).then(function(t){console.log(t.data),t.data.ok?(e.error=!1,c.a.saveToken(t.data.token),m.push("/")):e.error=!0})},countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("b-card",{staticClass:"mb-2 bg-slick-carbon",staticStyle:{"max-width":"50rem","text-color":"red"},attrs:{title:"Iniciar sesión con Archuletas","header-tag":"header","footer-tag":"footer"}},[n("b-form",{on:{submit:t.onSubmit}},[n("b-form-group",{attrs:{id:"input-group-1","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",type:"text",required:"",placeholder:"Correo electrónico"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-2","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",required:"",type:"password",placeholder:"Contraseña"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),t.error?n("span",{staticStyle:{color:"red"}},[t._v("El usuario o contraseña son incorrectos")]):t._e(),t._v(" "),n("b-button",{attrs:{block:"",variant:"primary"}},[t._v("Iniciar sesión")]),t._v(" "),n("hr"),t._v(" "),n("b-button",{attrs:{variant:"success"}},[t._v("Crear cuenta nueva")]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("b-button",{staticClass:"mb-2 ",attrs:{size:"sm",variant:"outline-light"},on:{click:t.login}},[t._v("Iniciar con BBVArchuletas")])],1),t._v(" "),n("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",variant:t.status},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v("\n        "+t._s(t.message)+"\n      ")])],1)],1)},staticRenderFns:[]};var k=n("VU/8")(b,_,!1,function(t){n("1KHg")},"data-v-7a88dcff",null).exports;o.default.use(f.a),o.default.use(f.b),o.default.component("pages-layout",k),o.default.component("bar-layout",v),o.default.component("notfound-layout",u),o.default.config.productionTip=!1,h.a.init("http://ec2-18-223-113-64.us-east-2.compute.amazonaws.com:8000"),new o.default({el:"#app",router:m,components:{App:r},template:"<App/>"})},WkQT:function(t,e){},w1AT:function(t,e,n){"use strict";var o=n("mtWM"),a=n.n(o),r=n("xLxn"),s={init:function(t){a.a.defaults.baseURL=t},setHeader:function(){a.a.defaults.headers.common.Authorization="Token "+r.a.getToken()},removeHeader:function(){a.a.defaults.headers.common={}},get:function(t){return a.a.get(t)},post:function(t,e){return a.a.post(t,e)},put:function(t,e){return a.a.put(t,e)},delete:function(t){return a.a.delete(t)},customRequest:function(t){return a()(t)}};e.a=s},xLxn:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={getToken:function(){return localStorage.getItem("access_token")},saveToken:function(t){localStorage.setItem("access_token",t)},removeToken:function(){localStorage.removeItem("access_token")},getRefreshToken:function(){return localStorage.getItem("refresh_token")},saveRefreshToken:function(t){localStorage.setItem("refresh_token",t)},removeRefreshToken:function(){localStorage.removeItem("refresh_token")}}}},["NHnr"]);
//# sourceMappingURL=app.748f312dde2bd1858d64.js.map